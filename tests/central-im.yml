---

public_address: central-imaging.com


databases:

  splunk:
    - role: splunk-docker
      password: XXXX
      ports:
        http:  8000
        query: 8088
        hec:   8089
      mounts:
        - /$DATA/splunk

  redis:
    # broker
    - role: redis-docker
      password: XXXX
      ports:
        redis: 7634
      mounts:
        - /$DATA/redis

  postgres:
    - role: matic-insurance.docker-postgres
      ports:
        postgres: 5432
      mounts:
        - /$DATA/postgres


servers:

  ftpd:
    - role: pureftp-docker
      ports:
        ftp:  21
        ftps: 443
      user_passwords: True
      mounts:
        - /$DATA/ftpd/trial_nn

  httpd:
    - role: nginx-docker
      ports:
        http:  80
        https: 443
      mounts:
        - /$DATA/httpd
    - role: certbot <----??

  front_end:
    - role: front-end <----??
      ports:
        http: 5000

  snappass:
    - role: snappass-docker
      ports:
        http: 5001


trials:

  trial_00:
    - role: osimis-docker  # review
      ports:
        http:  42001
      mounts:
        - /$DATA/orthanc/trial_00
    - role: orthanc-docker # queue
      ports:
        http:  42002
        dicom: 42003
  ...

  trial_nn:
    - role: osimis-docker  # review  <----??
      ports:
        http:  42nn1
      mounts:
        - /$DATA/orthanc/trial_nn
    - role: orthanc_docker # queue
      ports:
        http:  42nn2
        dicom: 42nn3


handlers:

  diana:
    - role: diana-docker

